/**
 * Arena Fund Touch-Friendly Interaction System
 * 
 * Comprehensive touch target sizing, gesture support, and mobile interaction patterns
 * Ensures all interactive elements meet WCAG 2.1 AA standards (minimum 44px touch targets)
 */

/* ===== TOUCH TARGET SIZING ===== */

/* Base touch target - ensures minimum 44px x 44px */
.touch-target {
  min-height: 44px;
  min-width: 44px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

/* Touch target variants for different use cases */
.touch-target-sm {
  min-height: 44px;
  min-width: 44px;
  padding: var(--spacing-2);
}

.touch-target-md {
  min-height: 48px;
  min-width: 48px;
  padding: var(--spacing-3);
}

.touch-target-lg {
  min-height: 56px;
  min-width: 56px;
  padding: var(--spacing-4);
}

.touch-target-xl {
  min-height: 64px;
  min-width: 64px;
  padding: var(--spacing-5);
}

/* ===== TOUCH SPACING ===== */

/* Adequate spacing between touch targets (minimum 8px) */
.touch-spacing {
  gap: var(--spacing-2);
}

.touch-spacing-md {
  gap: var(--spacing-3);
}

.touch-spacing-lg {
  gap: var(--spacing-4);
}

/* Touch-friendly button groups */
.touch-button-group {
  display: flex;
  gap: var(--spacing-3);
  flex-wrap: wrap;
}

.touch-button-group > * {
  min-height: 44px;
  min-width: 44px;
}

/* ===== TOUCH FEEDBACK SYSTEM ===== */

/* Base touch feedback */
.touch-feedback {
  position: relative;
  overflow: hidden;
  -webkit-tap-highlight-color: transparent;
  user-select: none;
  touch-action: manipulation;
}

/* Ripple effect for touch feedback */
.touch-ripple {
  position: relative;
  overflow: hidden;
}

.touch-ripple::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.3);
  transform: translate(-50%, -50%);
  transition: width 0.3s ease-out, height 0.3s ease-out;
  pointer-events: none;
}

.touch-ripple:active::before {
  width: 200px;
  height: 200px;
}

/* Touch press feedback */
.touch-press {
  transition: transform 0.1s ease-out, box-shadow 0.1s ease-out;
}

.touch-press:active {
  transform: scale(0.95);
  box-shadow: var(--shadow-sm);
}

/* Touch lift feedback */
.touch-lift {
  transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
}

.touch-lift:active {
  transform: translateY(1px);
  box-shadow: var(--shadow-xs);
}

/* ===== GESTURE SUPPORT ===== */

/* Swipeable elements */
.swipeable {
  touch-action: pan-x;
  user-select: none;
  position: relative;
  overflow: hidden;
}

.swipeable-vertical {
  touch-action: pan-y;
  user-select: none;
  position: relative;
  overflow: hidden;
}

/* Draggable elements */
.draggable {
  touch-action: none;
  user-select: none;
  cursor: grab;
}

.draggable:active {
  cursor: grabbing;
}

/* Pinch-to-zoom support */
.pinch-zoom {
  touch-action: pinch-zoom;
  user-select: none;
}

/* ===== MOBILE NAVIGATION ENHANCEMENTS ===== */

/* Touch-friendly navigation items */
.nav-touch-item {
  min-height: 48px;
  padding: var(--spacing-3) var(--spacing-4);
  display: flex;
  align-items: center;
  gap: var(--spacing-3);
  border-radius: var(--radius-md);
  transition: all var(--transition-base);
  text-decoration: none;
  color: var(--color-foreground);
  position: relative;
  overflow: hidden;
}

.nav-touch-item:hover {
  background-color: var(--color-secondary);
  transform: translateX(4px);
}

.nav-touch-item:active {
  background-color: var(--color-secondary-active);
  transform: translateX(2px);
}

.nav-touch-item.active {
  background-color: var(--color-primary);
  color: white;
}

.nav-touch-item.active::after {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 4px;
  background-color: var(--color-primary-foreground);
}

/* Mobile menu toggle */
.mobile-menu-toggle {
  min-height: 48px;
  min-width: 48px;
  padding: var(--spacing-3);
  border: none;
  background: transparent;
  border-radius: var(--radius-md);
  transition: all var(--transition-base);
  position: relative;
}

.mobile-menu-toggle:hover {
  background-color: var(--color-secondary);
}

.mobile-menu-toggle:active {
  background-color: var(--color-secondary-active);
  transform: scale(0.95);
}

/* Hamburger menu animation */
.hamburger {
  width: 24px;
  height: 18px;
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.hamburger-line {
  width: 100%;
  height: 2px;
  background-color: currentColor;
  border-radius: 1px;
  transition: all 0.3s ease;
  transform-origin: center;
}

.hamburger.open .hamburger-line:nth-child(1) {
  transform: rotate(45deg) translate(6px, 6px);
}

.hamburger.open .hamburger-line:nth-child(2) {
  opacity: 0;
}

.hamburger.open .hamburger-line:nth-child(3) {
  transform: rotate(-45deg) translate(6px, -6px);
}

/* ===== FORM TOUCH ENHANCEMENTS ===== */

/* Touch-friendly form inputs */
.form-input-touch {
  min-height: 48px;
  padding: var(--spacing-3) var(--spacing-4);
  border: 2px solid var(--color-border);
  border-radius: var(--radius-lg);
  font-size: 16px; /* Prevents zoom on iOS */
  transition: all var(--transition-base);
  background-color: var(--color-input);
  color: var(--color-foreground);
}

.form-input-touch:focus {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
  outline: none;
}

.form-input-touch:active {
  border-color: var(--color-primary);
}

/* Touch-friendly select dropdown */
.select-touch {
  min-height: 48px;
  padding: var(--spacing-3) var(--spacing-4);
  padding-right: var(--spacing-10);
  border: 2px solid var(--color-border);
  border-radius: var(--radius-lg);
  font-size: 16px;
  background-color: var(--color-input);
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
  background-position: right var(--spacing-3) center;
  background-repeat: no-repeat;
  background-size: 16px 12px;
  appearance: none;
  cursor: pointer;
}

.select-touch:focus {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
  outline: none;
}

/* Touch-friendly checkbox and radio */
.checkbox-touch,
.radio-touch {
  min-height: 20px;
  min-width: 20px;
  margin: 0;
  cursor: pointer;
}

.checkbox-touch + label,
.radio-touch + label {
  min-height: 44px;
  padding: var(--spacing-3);
  display: flex;
  align-items: center;
  gap: var(--spacing-3);
  cursor: pointer;
  border-radius: var(--radius-md);
  transition: background-color var(--transition-base);
}

.checkbox-touch + label:hover,
.radio-touch + label:hover {
  background-color: var(--color-secondary);
}

.checkbox-touch + label:active,
.radio-touch + label:active {
  background-color: var(--color-secondary-active);
}

/* ===== CARD TOUCH INTERACTIONS ===== */

/* Touch-friendly cards */
.card-touch {
  padding: var(--spacing-4);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  background-color: var(--color-card);
  transition: all var(--transition-base);
  cursor: pointer;
  position: relative;
  overflow: hidden;
}

.card-touch:hover {
  border-color: var(--color-primary);
  box-shadow: var(--shadow-md);
  transform: translateY(-2px);
}

.card-touch:active {
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}

/* Expandable card touch behavior */
.card-expandable-touch {
  transition: all var(--transition-slow);
}

.card-expandable-touch:active {
  transform: scale(0.98);
}

.card-expandable-touch .card-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height var(--duration-500) ease-out;
}

.card-expandable-touch.expanded .card-content {
  max-height: 500px;
}

/* ===== BUTTON TOUCH ENHANCEMENTS ===== */

/* Touch-friendly button base */
.btn-touch {
  min-height: 48px;
  min-width: 48px;
  padding: var(--spacing-3) var(--spacing-6);
  border: none;
  border-radius: var(--radius-lg);
  font-size: 16px;
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--transition-base);
  position: relative;
  overflow: hidden;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-2);
  text-decoration: none;
}

/* Primary button touch */
.btn-touch-primary {
  background-color: var(--color-primary);
  color: var(--color-primary-foreground);
}

.btn-touch-primary:hover {
  background-color: var(--color-primary-hover);
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

.btn-touch-primary:active {
  background-color: var(--color-primary-active);
  transform: translateY(0);
  box-shadow: var(--shadow-sm);
}

/* Secondary button touch */
.btn-touch-secondary {
  background-color: var(--color-secondary);
  color: var(--color-secondary-foreground);
  border: 1px solid var(--color-border);
}

.btn-touch-secondary:hover {
  background-color: var(--color-secondary-hover);
  border-color: var(--color-border-strong);
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

.btn-touch-secondary:active {
  background-color: var(--color-secondary-active);
  transform: translateY(0);
  box-shadow: var(--shadow-sm);
}

/* Ghost button touch */
.btn-touch-ghost {
  background-color: transparent;
  color: var(--color-foreground);
}

.btn-touch-ghost:hover {
  background-color: var(--color-secondary);
}

.btn-touch-ghost:active {
  background-color: var(--color-secondary-active);
  transform: scale(0.95);
}

/* ===== ACCESSIBILITY ENHANCEMENTS ===== */

/* Focus indicators for touch devices */
.touch-focus:focus-visible {
  outline: 3px solid var(--color-focus-ring);
  outline-offset: 2px;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .touch-target,
  .btn-touch,
  .form-input-touch,
  .select-touch {
    border-width: 2px;
  }
  
  .touch-feedback:active {
    outline: 2px solid currentColor;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .touch-feedback,
  .touch-ripple,
  .touch-press,
  .touch-lift,
  .nav-touch-item,
  .mobile-menu-toggle,
  .hamburger-line,
  .form-input-touch,
  .select-touch,
  .card-touch,
  .card-expandable-touch,
  .btn-touch {
    transition: none !important;
    animation: none !important;
  }
  
  .touch-press:active,
  .touch-lift:active,
  .card-touch:hover,
  .btn-touch:hover {
    transform: none !important;
  }
}

/* ===== MOBILE-SPECIFIC OPTIMIZATIONS ===== */

/* Optimize for mobile devices */
@media (max-width: 768px) {
  /* Increase touch targets on small screens */
  .touch-target {
    min-height: 48px;
    min-width: 48px;
  }
  
  .btn-touch {
    min-height: 52px;
    padding: var(--spacing-4) var(--spacing-8);
  }
  
  .form-input-touch,
  .select-touch {
    min-height: 52px;
    padding: var(--spacing-4);
  }
  
  /* Increase spacing between touch elements */
  .touch-spacing {
    gap: var(--spacing-3);
  }
  
  .touch-button-group {
    gap: var(--spacing-4);
  }
  
  /* Full-width buttons on mobile */
  .btn-touch-mobile-full {
    width: 100%;
  }
}

/* ===== GESTURE UTILITIES ===== */

/* Swipe indicators */
.swipe-indicator {
  position: relative;
}

.swipe-indicator::after {
  content: '';
  position: absolute;
  right: var(--spacing-4);
  top: 50%;
  transform: translateY(-50%);
  width: 0;
  height: 0;
  border-left: 6px solid var(--color-muted-foreground);
  border-top: 4px solid transparent;
  border-bottom: 4px solid transparent;
  opacity: 0.6;
}

/* Pull-to-refresh indicator */
.pull-refresh {
  position: relative;
  overflow: hidden;
}

.pull-refresh-indicator {
  position: absolute;
  top: -60px;
  left: 50%;
  transform: translateX(-50%);
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background-color: var(--color-primary);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  transition: top var(--duration-300) ease-out;
}

.pull-refresh.pulling .pull-refresh-indicator {
  top: 20px;
}

/* ===== HAPTIC FEEDBACK UTILITIES ===== */

/* Classes to trigger haptic feedback */
.haptic-light {
  /* Light haptic feedback - used with JavaScript */
}

.haptic-medium {
  /* Medium haptic feedback - used with JavaScript */
}

.haptic-heavy {
  /* Heavy haptic feedback - used with JavaScript */
}

/* ===== TOUCH-FRIENDLY ANIMATIONS ===== */

/* Smooth touch animations */
.touch-animate {
  transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.touch-animate:active {
  transition: transform 0.1s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Bounce effect for touch */
.touch-bounce:active {
  animation: touchBounce 0.3s ease-out;
}

@keyframes touchBounce {
  0% { transform: scale(1); }
  50% { transform: scale(0.95); }
  100% { transform: scale(1); }
}

/* Pulse effect for touch */
.touch-pulse:active {
  animation: touchPulse 0.4s ease-out;
}

@keyframes touchPulse {
  0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4); }
  70% { box-shadow: 0 0 0 10px rgba(59, 130, 246, 0); }
  100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); }
}

/* ===== UTILITY CLASSES ===== */

/* Disable touch interactions */
.no-touch {
  touch-action: none;
  pointer-events: none;
}

/* Enable touch interactions */
.enable-touch {
  touch-action: auto;
  pointer-events: auto;
}

/* Touch-safe scrolling */
.touch-scroll {
  -webkit-overflow-scrolling: touch;
  overflow-scrolling: touch;
}

/* Prevent text selection during touch */
.no-select {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* Enable text selection */
.enable-select {
  -webkit-user-select: text;
  -moz-user-select: text;
  -ms-user-select: text;
  user-select: text;
}